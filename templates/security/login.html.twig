{% extends 'blank.html.twig' %}

{% block title %}Log in{% endblock %}

{% block body %}
    <div class="h-full bg-custom-dark flex justify-center p-4 overflow-hidden pt-40">
        <div class="w-full max-w-md bg-custom-mint rounded-2xl shadow-lg p-8 border border-custom-teal">
            <h1 class="text-3xl font-bold text-custom-light mb-8 text-center">Welcome Back</h1>
            <form method="POST">
                <div class="space-y-6">
                    {% if error %}
                        <div class="bg-red-900 border border-red-700 text-red-300 p-4 rounded-lg mb-4">
                            {{ error.messageKey|trans(error.messageData, 'security') }}
                        </div>
                    {% endif %}

                    {% if app.user %}
                        <div class="text-custom-light mb-4 p-3 bg-custom-dark rounded-lg border border-custom-teal">
                            You are logged in as {{ app.user.userIdentifier }},
                            <a href="{{ path('app_logout') }}" class="text-custom-teal hover:text-custom-light underline decoration-2 underline-offset-2">Logout</a>
                        </div>
                    {% endif %}

                    <div>
                        <label for="username" class="block text-sm font-semibold text-custom-light mb-2">Email Address</label>
                        <input type="email" value="{{ last_username }}" name="_username" id="username"
                               class="w-full p-4 bg-custom-dark text-custom-light rounded-lg border-2 border-custom-teal focus:outline-none focus:border-custom-light transition-all duration-300"
                               autocomplete="email" required autofocus>
                    </div>

                    <div>
                        <label for="password" class="block text-sm font-semibold text-custom-light mb-2">Password</label>
                        <input type="password" name="_password" id="password"
                               class="w-full p-4 bg-custom-dark text-custom-light rounded-lg border-2 border-custom-teal focus:outline-none focus:border-custom-light transition-all duration-300"
                               autocomplete="current-password" required>
                    </div>

                    <input type="hidden" name="_csrf_token" data-controller="csrf-protection"
                           value="{{ csrf_token('authenticate') }}">

                    <button type="submit"
                            class="w-full px-6 py-4 border-2 border-custom-teal bg-custom-teal text-custom-light hover:bg-custom-light hover:text-custom-dark transition-all duration-300 font-semibold text-lg rounded-lg mt-8">
                        Sign In
                    </button>
                </div>
            </form>
        </div>
    </div>
{% endblock %}
